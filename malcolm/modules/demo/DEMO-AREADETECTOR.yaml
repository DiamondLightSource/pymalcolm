# To start the IOC, run Launcher -> Utilities -> GDA SWMR AreaDetector Sim
- builtin.defines.cmd_string:
    name: hostname
    cmd: hostname -s

- builtin.defines.export_env_string:
    name: EPICS_CA_SERVER_PORT
    value: 6064

- builtin.defines.export_env_string:
    name: EPICS_CA_REPEATER_PORT
    value: 6065

- builtin.defines.string:
    name: config_dir
    value: /tmp

# Create some Blocks
- demo.blocks.motion_block:
    mri: $(hostname)-ML-MOT-01
    config_dir: $(config_dir)

- demo.blocks.detector_block:
    mri: $(hostname)-ML-DET-01
    config_dir: $(config_dir)
    label: Interference detector

- ADSimDetector.blocks.sim_detector_runnable_block:
    mri_prefix: $(hostname)-ML-DET-02
    config_dir: $(config_dir)
    pv_prefix: $(hostname)-AD-SIM-01
    label: Ramp detector
    drv_suffix: CAM

- demo.blocks.scan_2det_block:
    mri: $(hostname)-ML-SCAN-01
    config_dir: $(config_dir)
    initial_design: template_both_detectors

# Add a webserver comms
- web.blocks.web_server_block:
    mri: WEB

# Add a PVA comms
- pva.blocks.pva_server_block:
    mri: PVA
